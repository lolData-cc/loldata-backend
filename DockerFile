FROM oven/bun:latest

WORKDIR /app

# Copia prima i manifest per sfruttare la cache
COPY package.json bun.lockb* ./

# Install ripetibile
RUN bun install --frozen-lockfile

# Copia il resto del progetto
COPY . .

# Railway userà la PORT env; EXPOSE è solo informativo
EXPOSE 3001

CMD ["bun", "start"]
